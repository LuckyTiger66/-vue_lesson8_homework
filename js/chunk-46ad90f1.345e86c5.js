(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46ad90f1"],{"3d4f":function(t,e,c){"use strict";var a=function(t){return{all:t=t||new Map,on:function(e,c){var a=t.get(e);a?a.push(c):t.set(e,[c])},off:function(e,c){var a=t.get(e);a&&(c?a.splice(a.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var a=t.get(e);a&&a.slice().map((function(t){t(c)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,c)}))}}},o=a();e["a"]=o},6034:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o={id:"main",class:"container-lg content"},n=Object(a["createVNode"])("h2",{class:"pt-4 mt-3"},"確認購物車",-1),r=Object(a["createVNode"])("figure",{class:"my-5 text-center mx-auto"},[Object(a["createVNode"])("img",{class:"img-fluid",src:"https://i.imgur.com/BNZuZJC.png",alt:"step1 確認購物車"})],-1),s={class:"text-end mb-2"},l={key:0,class:"material-icons animate-spin"},d=Object(a["createTextVNode"])(" 清空購物車 "),i={class:"p-table table align-middle"},u=Object(a["createVNode"])("thead",{class:"p-table__head"},[Object(a["createVNode"])("tr",{class:"text-light"},[Object(a["createVNode"])("th",{width:"30%",class:"text-center fs-7 fs-sm-6"},"商品"),Object(a["createVNode"])("th",{class:"p-table__th--num text-center fs-7 fs-sm-6"},"數量"),Object(a["createVNode"])("th",{width:"20%",class:"text-end fs-7 fs-sm-6"},"小計"),Object(a["createVNode"])("th",{width:"20%"})])],-1),b={class:"p-table__body"},p={key:0,class:"text-danger"},m={class:"p-table__foot"},j={class:"text-light"},O={colspan:"2"},g={key:0,class:"input-group mb-3 input-group-sm"},f={class:"input-group-append"},h={key:0,class:"material-icons animate-spin"},N=Object(a["createTextVNode"])(" 套用優惠碼 "),k={key:0,colspan:"2",class:"text-end"},V={key:0},y={key:1,class:"text-end"},x={key:0},C={colspan:"4",class:"text-end text-light"},v={key:1,class:"mt-4 w-100 w-md-50 mx-auto"},B=Object(a["createVNode"])("img",{src:"https://i.imgur.com/l3qoJFs.jpg",alt:"請先將商品加入購物車",class:"img-fluid"},null,-1),_={class:"d-flex justify-content-between mb-4"},S=Object(a["createTextVNode"])("繼續購物"),w=Object(a["createTextVNode"])("下一步");function D(t,e,c,D,I,$){var T,A,P=Object(a["resolveComponent"])("UserCart"),q=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])("main",o,[n,I.cart.total>0?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[r,Object(a["createVNode"])("div",s,[Object(a["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[1]||(e[1]=function(){return $.deleteCartAll&&$.deleteCartAll.apply($,arguments)}),disabled:I.cart.carts<=1},[1===I.loadingStatus.loadingItem?(Object(a["openBlock"])(),Object(a["createBlock"])("span",l," cached ")):Object(a["createCommentVNode"])("",!0),d],8,["disabled"])]),Object(a["createVNode"])("table",i,[u,Object(a["createVNode"])("tbody",b,[I.cart.carts?(Object(a["openBlock"])(),Object(a["createBlock"])(P,{key:0,loading:I.loadingStatus,cartitem:I.cart,onDeleteCart:$.deleteCart,onAddProductNum:$.addProductNum,onCutProductNum:$.cutProductNum},null,8,["loading","cartitem","onDeleteCart","onAddProductNum","onCutProductNum"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("td",null,[this.message?(Object(a["openBlock"])(),Object(a["createBlock"])("span",p,Object(a["toDisplayString"])(this.message),1)):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createVNode"])("tfoot",m,[Object(a["createVNode"])("tr",j,[Object(a["createVNode"])("td",O,[I.cart.final_total==I.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("div",g,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return I.coupon_code=t}),placeholder:"請輸入優惠碼",disabled:I.cart.final_total!==I.cart.total},null,8,["disabled"]),[[a["vModelText"],I.coupon_code]]),Object(a["createVNode"])("div",f,[Object(a["createVNode"])("button",{class:"btn btn-sm btn-outline-light ms-2",type:"button",onClick:e[3]||(e[3]=function(t){return $.addCouponCode()}),disabled:I.cart.final_total!==I.cart.total},[3===I.loadingStatus.loadingItem?(Object(a["openBlock"])(),Object(a["createBlock"])("span",h," cached ")):Object(a["createCommentVNode"])("",!0),N],8,["disabled"])])])):Object(a["createCommentVNode"])("",!0)]),(null===(T=I.cart)||void 0===T||null===(A=T.carts)||void 0===A?void 0:A.length)>=1?(Object(a["openBlock"])(),Object(a["createBlock"])("td",k,[I.cart.final_total!==I.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("del",V," 總計： "+Object(a["toDisplayString"])(t.$filters.currency(this.cart.total))+" NTD",1)):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])("總計： "+Object(a["toDisplayString"])(t.$filters.currency(this.cart.total))+" NTD",1)],64))])):(Object(a["openBlock"])(),Object(a["createBlock"])("td",y,"尚無商品"))]),I.cart.final_total!==I.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",x,[Object(a["createVNode"])("td",C," 折扣價： "+Object(a["toDisplayString"])(t.$filters.currency(I.cart.final_total))+" NTD ",1)])):Object(a["createCommentVNode"])("",!0)])])],64)):(Object(a["openBlock"])(),Object(a["createBlock"])("p",v,[Object(a["createVNode"])(q,{to:"/products"},{default:Object(a["withCtx"])((function(){return[B]})),_:1})])),Object(a["createVNode"])("div",_,[Object(a["createVNode"])(q,{class:"btn btn-secondary",to:"/products"},{default:Object(a["withCtx"])((function(){return[S]})),_:1}),Object(a["createVNode"])(q,{class:["btn btn-primary",{disabled:I.cart.carts<=1}],"aria-disabled":I.cart.carts<=1,to:"/cartcheck"},{default:Object(a["withCtx"])((function(){return[w]})),_:1},8,["aria-disabled","class"])])])}c("99af");var I=c("3d4f"),$={class:"d-sm-flex align-items-center"},T={class:"ps-sm-2"},A={class:"badge bg-primary"},P={class:"fs-7 fs-sm-6 mb-1"},q={key:0,class:"badge bg-success fs-8 fs-sm-7"},F={class:"input-group"},J={class:"input-group input-group-sm text-center mb-3 w-75 mx-auto"},U=Object(a["createVNode"])("span",null,"-",-1),M={class:"form-control m-0 fs-7 fs-sm-6"},Z=Object(a["createVNode"])("span",null,"+",-1),L={class:"text-end fs-7 fs-sm-6"},z={key:0,class:"text-success"},E=Object(a["createVNode"])("br",null,null,-1),G={class:"text-dark"},H={class:"text-end"},K={key:0,class:"material-icons animate-spin"},Q=Object(a["createTextVNode"])(" 刪除 ");function R(t,e,c,o,n,r){var s=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.cartitem.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])(s,{class:"p-table__link text-decoration-none",to:"/product/".concat(e.product.id)},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("figure",$,[Object(a["createVNode"])("img",{class:"product-img d-none d-sm-block",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"]),Object(a["createVNode"])("figcaption",T,[Object(a["createVNode"])("span",A,Object(a["toDisplayString"])(e.product.category),1),Object(a["createVNode"])("p",P,Object(a["toDisplayString"])(e.product.title),1),e.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("div",q," 已套用優惠券 ")):Object(a["createCommentVNode"])("",!0)])])]})),_:2},1032,["to"])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",F,[Object(a["createVNode"])("div",J,[Object(a["createVNode"])("button",{type:"button",onClick:function(c){return t.$emit("cut-product-num",e)},class:["btn-dark btn input-group-text rounded-0 fs-8 border-end-0",{disabled:e.qty<=1}],disabled:e.id===c.loading.loadingItem},[U],10,["onClick","disabled"]),Object(a["createVNode"])("p",M,Object(a["toDisplayString"])(e.qty),1),Object(a["createVNode"])("button",{type:"button",onClick:function(c){return t.$emit("add-product-num",e)},class:"btn-dark btn input-group-text rounded-0 fs-8",disabled:e.id===c.loading.loadingItem},[Z],8,["onClick","disabled"])])])]),Object(a["createVNode"])("td",L,[e.final_total!==e.total?(Object(a["openBlock"])(),Object(a["createBlock"])("small",z,[Object(a["createTextVNode"])("折扣價："+Object(a["toDisplayString"])(t.$filters.currency(e.final_total))+" NTD",1),E,Object(a["createVNode"])("del",G,Object(a["toDisplayString"])(t.$filters.currency(e.total))+" NTD",1)])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.$filters.currency(e.total))+" NTD",1)],64))]),Object(a["createVNode"])("td",H,[Object(a["createVNode"])("button",{onClick:function(c){return t.$emit("delete-cart",e)},type:"button",class:"btn btn-outline-danger btn-sm fs-7 fs-sm-6"},[c.loading.loadingItem===e.id?(Object(a["openBlock"])(),Object(a["createBlock"])("span",K," cached ")):Object(a["createCommentVNode"])("",!0),Q],8,["onClick"])])])})),128)}var W={emits:["delete-cart","add-product-num","cut-product-num"],props:{cartitem:{type:Object,default:function(){return{}}},loading:{type:Object,default:function(){return{}}}}};W.render=R;var X=W,Y={data:function(){return{loadingStatus:{loadingItem:""},cart:"",coupon_code:"",message:""}},components:{UserCart:X},methods:{showAlert:function(t){this.$swal(t.data.message)},deleteCartAll:function(){var t=this;this.loadingStatus.loadingItem=1;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("sean6","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.showAlert(e),t.getCart())})).catch((function(t){console.log(t)}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("sean6","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data,I["a"].emit("update-cart"))})).catch((function(t){console.log(t)}))},deleteCart:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("sean6","/cart/").concat(t.id);this.$http.delete(c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.showAlert(t),e.getCart())})).catch((function(t){console.log(t)}))},cutProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty-=1}},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("sean6","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))},addProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty+=1}},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("sean6","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))},addCouponCode:function(){var t=this;this.loadingStatus.loadingItem=3;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("sean6","/coupon"),c={code:this.coupon_code};this.$http.post(e,{data:c}).then((function(e){e.data.success?(t.loadingStatus.loadingItem="",t.showAlert(e),t.coupon_code="",t.message="",t.getCart()):(t.coupon_code="",t.loadingStatus.loadingItem="",t.message=e.data.message)})).catch((function(t){console.log(t)}))}},mounted:function(){console.clear(),this.getCart()}};Y.render=D;e["default"]=Y}}]);
//# sourceMappingURL=chunk-46ad90f1.345e86c5.js.map